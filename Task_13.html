<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>零基础JavaScript编码（一）</title>
</head>

<body>
    <label for="">请输入北京今天空气质量：<input id="aqi-input" type="text"></label>
    <button type="button" id="button">确认填写</button>

    <div>您输入的值是：<span id="aqi-display">尚无录入</span></div>

    <script type="text/javascript">
        (function() {
            /*
            在注释下方写下代码
            给按钮button绑定一个点击事件
            在事件处理函数中
            获取aqi-input输入的值，并显示在aqi-display中
            */

            //获取元素
            function $(el) {
                return document.getElementById(el)
            }

            //事件兼容
            function addEvent(ele, event, handler) {
                if (ele.addEventListener) {
                    ele.addEventListener(event, handler, false);
                } else if (ele.attachEvent) {
                    ele.attachEvent('on' + event, handler);
                } else {
                    ele['on' + event] = handler;
                }
            }

            //考虑输入的合法性
            function handle() {
                var num = parseInt($("aqi-input").value);
                if ((!isNaN(num)) && (num >= 0) && (num <= 500)) {
                    $("aqi-display").innerHTML = num;
                } else {
                    alert($("aqi-input").value + " 不是有效的AQI数值，请重新输入0-1000的有效整数！")
                }

            }

            //鼠标事件
            addEvent($('button'), 'click', handle);

            //键盘事件
            addEvent($('aqi-input'), 'keyup', function(event) {
                if (event.keyCode === 13) {
                    handle();
                }
            });

        })();
    </script>
    <pre>
    /_____    _____\   _____________
    |  \\ |__|  \\ |-(   因吹思婷！   )
    |_____/  \_____|   ⁻⁻⁻⁻⁻⁻⁻⁻⁻⁻⁻⁻⁻
         /^ ^ \
       (  ____; )
    </pre>
    <p>
    使用了简单的函数封装，考虑了输入的合法性、键盘事件、事件兼容。
    </p>
</body>

</html>
